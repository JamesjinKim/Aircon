# CHANGELOG

## v3.1 (2025-07-03) 🎯

### ✨ **새로운 기능**

#### **OA.DAMP 버튼 구조 개선**
- **3버튼 구조 도입**: OPEN + 숫자 + CLOSE 형태로 변경
- **균일한 버튼 크기**: OPEN과 CLOSE 버튼 모두 65×45px로 통일
- **새로운 함수**: `create_oa_damper_three_button_row()` 추가

#### **OA.DAMP 버튼 동작 로직 변경**
- **OPEN 버튼**: 
  - 클릭 시 숫자 +1 증가 (0~9 순환)
  - Green 색상으로 시각적 피드백
  - Serial 명령어: `$CMD,AIR,ALTDMP,OPEN,1` (고정값)
- **CLOSE 버튼**:
  - 클릭 시 숫자 -1 감소 (0에서 멈춤)
  - Green 색상으로 시각적 피드백
  - Serial 명령어: `$CMD,AIR,ALTDMP,CLOSE,1` (1 이상일 때만 전송)
- **숫자 버튼**: 이벤트 없음, 표시 전용

### 🔧 **개선 사항**

#### **UI/UX 개선**
- **그룹 명칭 변경**: "DAMPER CONTROLS" → "DAMP CONTROLS"
- **크기 일관성 보장**: `ensure_uniform_button_sizes()` 메서드에서 OA.DAMP 버튼 크기 재설정

#### **Serial 명령어 최적화**
- **SEMI AUTO TAB**: DAMP TEST 명령어 `DAMPTEST` → `DMPTEST`로 변경
- **조건부 전송**: CLOSE 버튼에서 숫자가 0일 때 명령어 전송 중단

### 🛠️ **기술적 개선**

#### **코드 구조**
- **새로운 이벤트 핸들러**: `create_new_oa_damper_controls()` 메서드 추가
- **기존 호환성 유지**: 기존 코드에 영향 없이 새 기능 구현
- **모듈화**: 기능별로 분리된 함수 구조

#### **상태 관리**
- **색상 피드백**: OPEN/CLOSE 버튼 간 상호 배타적 색상 변경
- **초기화 기능**: 연결 해제 시 버튼 상태 및 색상 초기화

### 📁 **수정된 파일**

#### **핵심 파일**
- `ui/ui_components.py`: 새로운 3버튼 함수 추가
- `managers/speed_manager.py`: 새로운 이벤트 핸들러 구현
- `ui/main_window.py`: 새 함수 연결 및 그룹 명칭 변경

#### **설정 파일**
- `ui/setup_buttons.py`: 토글 기능 제거 관련 수정
- `ref/aircon_dsct_cmd.txt`: 요구사항 문서 업데이트

### 🎯 **사용자 경험**

#### **직관적인 조작**
- **시각적 피드백**: 클릭한 버튼이 Green으로 변경되어 현재 선택 상태 표시
- **숫자 표시**: 클릭 횟수를 숫자로 시각적 확인 가능
- **안전한 조작**: 0에서 멈춤으로 예상치 못한 동작 방지

#### **하드웨어 제어 단순화**
- **고정값 전송**: 복잡한 숫자 값 대신 항상 1로 고정하여 하드웨어 제어 단순화
- **조건부 전송**: 불필요한 명령어 전송 방지

### 🔍 **버그 수정**

#### **버튼 크기 문제 해결**
- **원인**: `ensure_uniform_button_sizes()` 메서드가 OA.DAMP 버튼을 140px로 덮어쓰는 문제
- **해결**: OA.DAMP 버튼들을 65px로 재설정하는 코드 추가

#### **토글 기능 충돌 해결**
- **문제**: 기존 토글 기능과 새로운 이벤트 핸들러 충돌
- **해결**: 새로운 이벤트 핸들러가 기존 기능을 덮어쓰도록 구현

---

## v3.0 (2025년 7월 이전) 🎉
- **NEW**: SEMI AUTO 탭 추가
- **MAJOR**: 탭 구조 개편
- **IMPROVED**: 버튼 스타일 통일
- **ENHANCED**: 터치 친화적 UI 디자인
- **FIXED**: 시리얼 통신 안정성 개선